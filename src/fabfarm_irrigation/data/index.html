<!DOCTYPE HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- TODO: grab fontawesomes & server locally -->
    <link rel="stylesheet" type="text/css" href="all.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    
</head>

<body>
    <h2>Fab Farm Irrigation System</h2>

    <img src="logo.jpeg" style="height:400px;" /></p>

        <i class="fas fa-clock"></i>
        <span class="dht-labels">Farm Time:</span>
        <span id="currentTime"></span>
        <br/>
    <hr>
    <!-- TODO: the buttons here can have onChange events that auto-calls back w/o needing a submit -->
    %BUTTONPLACEHOLDER%
    <hr>
    <p>
        <i class="fas fa-thermometer-half"></i>
        <span class="dht-labels">Temperature</span>
        <span id="temperature">%TEMPERATURE%</span>
        <sup class="units">&deg;C</sup>
    </p>
    <hr>
    <p>
        <i class="fas fa-tint"></i>
        <span class="dht-labels">Humidity</span>
        <span id="humidity">%HUMIDITY%</span>
        <sup class="units">%</sup>
    </p>

</body>
<script>

    //setInterval(function() {

        //TODO: change the above to make *1* request and get json back
        var r3 = new XMLHttpRequest();
        r3.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                //document.getElementById("getData").innerHTML = this.responseText;
                console.log("Got json", this.responseText);
                var jsonData = JSON.parse(this.responseText);

                document.getElementById("currentTime").innerText = jsonData.data.currentTime;

            }
        };
        //r3.open("GET", "/getData", true);
        r3.open("GET", "sample.json", true);
        r3.send();


    //}, 10000);


</script>

</html>